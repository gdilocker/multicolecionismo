# ğŸ¨ DIAGRAMA DA ARQUITETURA - TheRichClub

**Data:** 2025-11-09
**Status:** VisualizaÃ§Ã£o Completa do Sistema

---

## ğŸŒ VISÃƒO GERAL DO FLUXO

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           USUÃRIO FINAL                              â”‚
â”‚                                                                      â”‚
â”‚  1. Acessa: therichclub.com                                         â”‚
â”‚  2. VÃª: "Busque seu domÃ­nio .com.rich"                             â”‚
â”‚  3. Digita: "maria"                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FRONTEND (React + Vite)                         â”‚
â”‚                      Hospedado em: Netlify                          â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  Home.tsx                                                â”‚       â”‚
â”‚  â”‚  â€¢ Input: [maria    ] .com.rich                         â”‚       â”‚
â”‚  â”‚  â€¢ Monta FQDN: "maria.com.rich"                         â”‚       â”‚
â”‚  â”‚  â€¢ Chama Edge Function                                  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ POST /functions/v1/domains
                           â”‚ { action: 'check', fqdn: 'maria.com.rich' }
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SUPABASE EDGE FUNCTIONS                            â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  domains/index.ts                                        â”‚       â”‚
â”‚  â”‚                                                          â”‚       â”‚
â”‚  â”‚  1. Recebe requisiÃ§Ã£o                                   â”‚       â”‚
â”‚  â”‚  2. Verifica no banco de dados                          â”‚       â”‚
â”‚  â”‚  3. Retorna status                                      â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ Query SQL
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SUPABASE DATABASE (PostgreSQL)                     â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚    domains       â”‚  â”‚ premium_domains  â”‚  â”‚  user_profiles   â”‚ â”‚
â”‚  â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚ â”‚
â”‚  â”‚ â€¢ fqdn           â”‚  â”‚ â€¢ fqdn           â”‚  â”‚ â€¢ display_name   â”‚ â”‚
â”‚  â”‚ â€¢ customer_id    â”‚  â”‚ â€¢ price_usd      â”‚  â”‚ â€¢ bio            â”‚ â”‚
â”‚  â”‚ â€¢ domain_type    â”‚  â”‚ â€¢ required_plan  â”‚  â”‚ â€¢ profile_image  â”‚ â”‚
â”‚  â”‚ â€¢ status         â”‚  â”‚ â€¢ is_available   â”‚  â”‚ â€¢ domain_id      â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚  Busca: SELECT * FROM domains WHERE fqdn = 'maria.com.rich'        â”‚
â”‚                                                                      â”‚
â”‚  Resultado: NULL (nÃ£o existe) = AVAILABLE                          â”‚
â”‚  Resultado: {customer_id: '...'} = UNAVAILABLE                     â”‚
â”‚  Resultado: premium_domains match = PREMIUM                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ Retorna resultado
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FRONTEND (Home.tsx)                             â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  âœ… AVAILABLE                                            â”‚       â”‚
â”‚  â”‚                                                          â”‚       â”‚
â”‚  â”‚  maria.com.rich                                         â”‚       â”‚
â”‚  â”‚  DomÃ­nio disponÃ­vel para registro!                     â”‚       â”‚
â”‚  â”‚                                                          â”‚       â”‚
â”‚  â”‚  [ğŸ“‹ Ver Planos]                                        â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ UsuÃ¡rio clica "Ver Planos"
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      /pricing (Pricing.tsx)                          â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚ Starter â”‚  Prime  â”‚  Elite  â”‚ Supreme â”‚                        â”‚
â”‚  â”‚ GRÃTIS  â”‚ $19/mÃªs â”‚ $70/mÃªs â”‚$300/mÃªs â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                                                                      â”‚
â”‚  UsuÃ¡rio escolhe plano â†’ /checkout                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ Pagamento via PayPal
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      PAYPAL API                                      â”‚
â”‚                                                                      â”‚
â”‚  1. Cria subscription                                               â”‚
â”‚  2. UsuÃ¡rio paga                                                    â”‚
â”‚  3. PayPal webhook â†’ Supabase Edge Function                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ Webhook confirma pagamento
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   SUPABASE: CriaÃ§Ã£o AutomÃ¡tica                       â”‚
â”‚                                                                      â”‚
â”‚  1. INSERT INTO customers (user_id, email, ...)                    â”‚
â”‚  2. INSERT INTO subscriptions (customer_id, plan, status)          â”‚
â”‚  3. INSERT INTO domains (fqdn, customer_id, status)                â”‚
â”‚  4. INSERT INTO user_profiles (user_id, domain_id, ...)            â”‚
â”‚                                                                      â”‚
â”‚  Status: PERFIL CRIADO! âœ…                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ UsuÃ¡rio logado â†’ Dashboard
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      /dashboard (Dashboard.tsx)                      â”‚
â”‚                                                                      â”‚
â”‚  Bem-vindo, Maria! ğŸ‘‹                                               â”‚
â”‚                                                                      â”‚
â”‚  Seus domÃ­nios:                                                     â”‚
â”‚  â€¢ maria.com.rich [ATIVO]                                          â”‚
â”‚                                                                      â”‚
â”‚  [âœï¸ Editar Perfil] [ğŸ“Š EstatÃ­sticas] [âš™ï¸ ConfiguraÃ§Ãµes]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ Edita perfil
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  /profile-manager (ProfileManager.tsx)               â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  â€¢ Upload foto de perfil                             â”‚          â”‚
â”‚  â”‚  â€¢ Adiciona bio                                      â”‚          â”‚
â”‚  â”‚  â€¢ Cria links personalizados                         â”‚          â”‚
â”‚  â”‚  â€¢ Configura loja (se habilitado)                    â”‚          â”‚
â”‚  â”‚  â€¢ Customiza cores/tema                              â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                      â”‚
â”‚  Salva â†’ UPDATE user_profiles SET ...                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ PERFIL PÃšBLICO AGORA DISPONÃVEL!
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PERFIL PÃšBLICO: /u/maria (PublicProfile.tsx)            â”‚
â”‚                                                                      â”‚
â”‚  URL no navegador: https://therichclub.com/u/maria                 â”‚
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚           [Foto]                                     â”‚          â”‚
â”‚  â”‚      maria.com.rich                                  â”‚          â”‚
â”‚  â”‚      Identidade Digital Exclusiva                    â”‚          â”‚
â”‚  â”‚                                                       â”‚          â”‚
â”‚  â”‚      Bio: "Empreendedora digital..."                â”‚          â”‚
â”‚  â”‚                                                       â”‚          â”‚
â”‚  â”‚      ğŸ”— Links:                                       â”‚          â”‚
â”‚  â”‚      â€¢ Instagram                                     â”‚          â”‚
â”‚  â”‚      â€¢ LinkedIn                                      â”‚          â”‚
â”‚  â”‚      â€¢ Website                                       â”‚          â”‚
â”‚  â”‚                                                       â”‚          â”‚
â”‚  â”‚      ğŸ›ï¸ Loja (se habilitado)                        â”‚          â”‚
â”‚  â”‚      ğŸ“± Posts Sociais (se habilitado)               â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                      â”‚
â”‚  Header mostra: "maria.com.rich"                                   â”‚
â”‚  Mas URL real Ã©: therichclub.com/u/maria                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ FLUXO DE DADOS DETALHADO

### **1. VerificaÃ§Ã£o de DomÃ­nio**

```
Usuario        Frontend           Edge Function      Database
   â”‚              â”‚                     â”‚               â”‚
   â”‚â”€â” Digite    â”‚                     â”‚               â”‚
   â”‚ â”‚"maria"    â”‚                     â”‚               â”‚
   â”‚<â”˜           â”‚                     â”‚               â”‚
   â”‚             â”‚                     â”‚               â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ handleSearch()    â”‚               â”‚
   â”‚             â”‚                     â”‚               â”‚
   â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ POST         â”‚
   â”‚             â”‚  action: 'check'    â”‚ /domains     â”‚
   â”‚             â”‚  fqdn: 'maria...'   â”‚               â”‚
   â”‚             â”‚                     â”‚               â”‚
   â”‚             â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚             â”‚                     â”‚ SELECT * FROM â”‚
   â”‚             â”‚                     â”‚ domains WHERE â”‚
   â”‚             â”‚                     â”‚ fqdn = '...'  â”‚
   â”‚             â”‚                     â”‚               â”‚
   â”‚             â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚             â”‚                     â”‚ NULL          â”‚
   â”‚             â”‚                     â”‚ (disponÃ­vel)  â”‚
   â”‚             â”‚                     â”‚               â”‚
   â”‚             â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ { status:    â”‚
   â”‚             â”‚   JSON Response      â”‚ 'AVAILABLE' } â”‚
   â”‚             â”‚                     â”‚               â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ setAvailable(true)â”‚               â”‚
   â”‚  âœ… Mostra  â”‚                     â”‚               â”‚
   â”‚  "DisponÃ­vel"â”‚                    â”‚               â”‚
```

### **2. Registro e Pagamento**

```
Usuario    Frontend    PayPal API    Webhook    Database
   â”‚          â”‚            â”‚            â”‚           â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ Escolhe   â”‚            â”‚           â”‚
   â”‚  Prime    â”‚ plano     â”‚            â”‚           â”‚
   â”‚          â”‚            â”‚            â”‚           â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ Redirect  â”‚            â”‚           â”‚
   â”‚  PayPal   â”‚ checkout  â”‚            â”‚           â”‚
   â”‚          â”‚            â”‚            â”‚           â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ Cria       â”‚           â”‚
   â”‚          â”‚  Login +   â”‚ subscriptionâ”‚           â”‚
   â”‚          â”‚  Paga      â”‚            â”‚           â”‚
   â”‚          â”‚            â”‚            â”‚           â”‚
   â”‚          â”‚            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ Confirma  â”‚
   â”‚          â”‚            â”‚  Webhook   â”‚ pagamento â”‚
   â”‚          â”‚            â”‚            â”‚           â”‚
   â”‚          â”‚            â”‚            â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
   â”‚          â”‚            â”‚            â”‚ INSERT    â”‚
   â”‚          â”‚            â”‚            â”‚ customer, â”‚
   â”‚          â”‚            â”‚            â”‚ subscriptionâ”‚
   â”‚          â”‚            â”‚            â”‚ domain    â”‚
   â”‚          â”‚            â”‚            â”‚ profile   â”‚
   â”‚          â”‚            â”‚            â”‚           â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚          â”‚  Email confirmaÃ§Ã£o                   â”‚
   â”‚          â”‚  "maria.com.rich criado!"            â”‚
```

### **3. Acesso ao Perfil PÃºblico**

```
Visitante      Frontend         Database        Profile
   â”‚              â”‚                 â”‚              â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ Acessa:        â”‚              â”‚
   â”‚ /u/maria     â”‚ PublicProfile  â”‚              â”‚
   â”‚              â”‚                 â”‚              â”‚
   â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚ SELECT *   â”‚
   â”‚              â”‚ useParams()     â”‚ FROM        â”‚
   â”‚              â”‚ username='maria'â”‚ user_profilesâ”‚
   â”‚              â”‚                 â”‚ JOIN domains â”‚
   â”‚              â”‚                 â”‚              â”‚
   â”‚              â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ {          â”‚
   â”‚              â”‚   Profile data  â”‚   display_nameâ”‚
   â”‚              â”‚                 â”‚   bio,      â”‚
   â”‚              â”‚                 â”‚   links     â”‚
   â”‚              â”‚                 â”‚ }           â”‚
   â”‚              â”‚                 â”‚              â”‚
   â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ Renderiza      â”‚              â”‚
   â”‚  Perfil      â”‚ maria.com.rich  â”‚              â”‚
   â”‚  completo    â”‚ (header visual) â”‚              â”‚
```

---

## ğŸ—ï¸ ARQUITETURA DE COMPONENTES

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        APP.TSX                               â”‚
â”‚                     (Router Principal)                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚            â”‚            â”‚              â”‚          â”‚
        â–¼            â–¼            â–¼              â–¼          â–¼
    â”Œâ”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”
    â”‚Home â”‚    â”‚Pricing  â”‚  â”‚Dashboard â”‚  â”‚  /u/:    â”‚ â”‚... â”‚
    â”‚.tsx â”‚    â”‚.tsx     â”‚  â”‚.tsx      â”‚  â”‚username  â”‚ â”‚    â”‚
    â””â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜
       â”‚                          â”‚              â”‚
       â”‚                          â–¼              â”‚
       â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
       â”‚                    â”‚Profile   â”‚         â”‚
       â”‚                    â”‚Manager   â”‚         â”‚
       â”‚                    â”‚.tsx      â”‚         â”‚
       â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
       â”‚                          â”‚              â”‚
       â–¼                          â–¼              â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚              SHARED COMPONENTS                     â”‚
   â”‚                                                    â”‚
   â”‚  â€¢ Header.tsx                                     â”‚
   â”‚  â€¢ Footer.tsx                                     â”‚
   â”‚  â€¢ LoginModalSimple.tsx                           â”‚
   â”‚  â€¢ SuccessModal.tsx                               â”‚
   â”‚  â€¢ DomainSearch.tsx                               â”‚
   â”‚  â€¢ LinkEditor.tsx                                 â”‚
   â”‚  â€¢ SocialButtonsEditor.tsx                        â”‚
   â”‚  â€¢ StoreManager.tsx (condicional)                 â”‚
   â”‚  â€¢ SocialFeed.tsx (condicional)                   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ ESTRUTURA DO BANCO DE DADOS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     auth.users (Supabase Auth)                â”‚
â”‚  â€¢ id (UUID)                                                  â”‚
â”‚  â€¢ email                                                      â”‚
â”‚  â€¢ encrypted_password                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ 1:1
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      customers                                â”‚
â”‚  â€¢ id (UUID)                                                  â”‚
â”‚  â€¢ user_id (FK â†’ auth.users)                                 â”‚
â”‚  â€¢ email                                                      â”‚
â”‚  â€¢ full_name                                                  â”‚
â”‚  â€¢ role (user | reseller | admin)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ 1:N
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      subscriptions                            â”‚
â”‚  â€¢ id (UUID)                                                  â”‚
â”‚  â€¢ customer_id (FK â†’ customers)                              â”‚
â”‚  â€¢ plan_code (starter | prime | elite | supreme)             â”‚
â”‚  â€¢ status (active | suspended | cancelled)                   â”‚
â”‚  â€¢ trial_ends_at                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ 1:N (conforme limite do plano)
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        domains                                â”‚
â”‚  â€¢ id (UUID)                                                  â”‚
â”‚  â€¢ fqdn (TEXT UNIQUE) â†’ "maria.com.rich"                     â”‚
â”‚  â€¢ customer_id (FK â†’ customers)                              â”‚
â”‚  â€¢ domain_type (regular | premium)                           â”‚
â”‚  â€¢ status (active | suspended | cancelled)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ 1:1
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     user_profiles                             â”‚
â”‚  â€¢ id (UUID)                                                  â”‚
â”‚  â€¢ user_id (FK â†’ auth.users)                                 â”‚
â”‚  â€¢ domain_id (FK â†’ domains)                                  â”‚
â”‚  â€¢ display_name                                              â”‚
â”‚  â€¢ bio                                                       â”‚
â”‚  â€¢ profile_image                                             â”‚
â”‚  â€¢ background_image                                          â”‚
â”‚  â€¢ custom_css                                                â”‚
â”‚  â€¢ show_store (BOOLEAN)                                      â”‚
â”‚  â€¢ show_social (BOOLEAN)                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                â”‚                â”‚
        â–¼                â–¼                â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ links  â”‚      â”‚ products â”‚    â”‚  posts   â”‚
   â”‚        â”‚      â”‚ (store)  â”‚    â”‚ (social) â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸŒ DNS E ROTEAMENTO

### **NÃƒO EXISTE (Importante!):**

```
âŒ DNS Wildcard:
   *.com.rich â†’ NÃƒO CONFIGURADO

âŒ SubdomÃ­nios Reais:
   maria.com.rich â†’ NÃƒO Ã‰ UM DNS REAL
   vip.com.rich â†’ NÃƒO Ã‰ UM DNS REAL
```

### **O QUE EXISTE:**

```
âœ… DNS Ãšnico:
   therichclub.com â†’ A Record â†’ [IP Netlify]
   www.therichclub.com â†’ CNAME â†’ site.netlify.app

âœ… React Router:
   /                 â†’ Home.tsx
   /pricing          â†’ Pricing.tsx
   /dashboard        â†’ Dashboard.tsx
   /u/:username      â†’ PublicProfile.tsx
   /u/maria          â†’ Busca "maria.com.rich" no banco
```

### **Fluxo de Acesso:**

```
UsuÃ¡rio digita: therichclub.com/u/maria
                       â”‚
                       â–¼
               DNS resolve para IP
                       â”‚
                       â–¼
               Netlify serve app React
                       â”‚
                       â–¼
         React Router captura /u/maria
                       â”‚
                       â–¼
         PublicProfile.tsx recebe username="maria"
                       â”‚
                       â–¼
      Busca no banco: domains.fqdn = "maria.com.rich"
                       â”‚
                       â–¼
              Renderiza perfil com header:
           "maria.com.rich" (sÃ³ visual!)
```

---

## ğŸ” SEGURANÃ‡A E RLS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    REQUISIÃ‡ÃƒO                            â”‚
â”‚                                                          â”‚
â”‚  1. UsuÃ¡rio faz request                                 â”‚
â”‚  2. Token JWT no header                                 â”‚
â”‚  3. Supabase valida token                               â”‚
â”‚  4. auth.uid() extraÃ­do do JWT                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ROW LEVEL SECURITY (RLS)                  â”‚
â”‚                                                          â”‚
â”‚  Para cada query SQL, Supabase adiciona WHERE:          â”‚
â”‚                                                          â”‚
â”‚  SELECT * FROM user_profiles                            â”‚
â”‚  WHERE ...                                              â”‚
â”‚    AND (auth.uid() = user_id)  â† RLS Policy            â”‚
â”‚                                                          â”‚
â”‚  Resultado: SÃ³ retorna dados que o usuÃ¡rio pode ver    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

EXEMPLOS:

1. Leitura PÃºblica:
   SELECT * FROM user_profiles
   WHERE domain.status = 'active'  â† Qualquer um vÃª

2. EdiÃ§Ã£o Restrita:
   UPDATE user_profiles SET bio = '...'
   WHERE id = '...'
   AND auth.uid() = user_id  â† SÃ³ o dono edita

3. Admin Override:
   SELECT * FROM customers
   WHERE role = 'admin' OR customer_id = auth.uid()
```

---

## ğŸ“Š PLANOS E LIMITES

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Plano   â”‚  PreÃ§o  â”‚  DomÃ­nios  â”‚      Features        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Starter  â”‚  GRÃTIS â”‚     1      â”‚ Regular only         â”‚
â”‚          â”‚ 14 dias â”‚  regular   â”‚ Perfil bÃ¡sico        â”‚
â”‚          â”‚         â”‚            â”‚                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Prime    â”‚ $19/mÃªs â”‚     3      â”‚ Regulares only       â”‚
â”‚          â”‚         â”‚ regulares  â”‚ Perfil + Links       â”‚
â”‚          â”‚         â”‚            â”‚ Loja opcional        â”‚
â”‚          â”‚         â”‚            â”‚                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Elite    â”‚ $70/mÃªs â”‚    10      â”‚ Regular + Premium    â”‚
â”‚          â”‚         â”‚ + premium  â”‚ Tudo do Prime        â”‚
â”‚          â”‚         â”‚            â”‚ + DomÃ­nios premium   â”‚
â”‚          â”‚         â”‚            â”‚ + Social network     â”‚
â”‚          â”‚         â”‚            â”‚                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Supreme  â”‚$300/mÃªs â”‚    50      â”‚ Tudo do Elite        â”‚
â”‚          â”‚+$5k fee â”‚ + premium  â”‚ + Prioridade         â”‚
â”‚          â”‚         â”‚            â”‚ + Suporte VIP        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

VALIDAÃ‡ÃƒO NO CÃ“DIGO:

if (userPlan === 'starter' && domainCount >= 1) {
  throw new Error('Limite atingido. Upgrade para Prime.');
}

if (isPremiumDomain && !['elite', 'supreme'].includes(userPlan)) {
  throw new Error('DomÃ­nio premium requer Elite ou Supreme.');
}
```

---

## ğŸ”„ EDGE FUNCTIONS (Backend)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PRINCIPAIS EDGE FUNCTIONS                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. domains/index.ts
   â€¢ Verifica disponibilidade de domÃ­nios
   â€¢ Retorna: AVAILABLE, UNAVAILABLE, PREMIUM

2. paypal-create-subscription/index.ts
   â€¢ Cria assinatura no PayPal
   â€¢ Retorna: approval_url

3. paypal-webhook/index.ts
   â€¢ Recebe confirmaÃ§Ã£o de pagamento
   â€¢ Cria customer, subscription, domain, profile

4. auto-create-profile/index.ts
   â€¢ Trigger: Novo usuÃ¡rio cadastrado
   â€¢ Cria profile inicial automaticamente

5. verify-link-security/index.ts
   â€¢ Valida links com Google Safe Browsing
   â€¢ Marca links suspeitos como unsafe

6. domain-lifecycle-cron/index.ts
   â€¢ Roda diariamente
   â€¢ Suspende domÃ­nios com pagamento atrasado
   â€¢ Libera domÃ­nios cancelados apÃ³s grace period

FLUXO TÃPICO:

Frontend â†’ Edge Function â†’ Database â†’ Response â†’ Frontend
   |            |              |          |          |
   POST      Valida JWT    Apply RLS   JSON      Update UI
          Rate Limit      Run Query   Result    Show Data
          Sanitize Input  Audit Log
```

---

## ğŸ“± RESPONSIVE DESIGN

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  MOBILE (< 768px)                        â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  â˜°  therichclub.com           [Login]      â”‚        â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
â”‚  â”‚                                             â”‚        â”‚
â”‚  â”‚  [ username     ] .com.rich                â”‚        â”‚
â”‚  â”‚        [ğŸ” Buscar]                         â”‚        â”‚
â”‚  â”‚                                             â”‚        â”‚
â”‚  â”‚  âœ… maria.com.rich                         â”‚        â”‚
â”‚  â”‚  DisponÃ­vel!                               â”‚        â”‚
â”‚  â”‚  [ğŸ“‹ Ver Planos]                           â”‚        â”‚
â”‚  â”‚                                             â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 DESKTOP (>= 1024px)                      â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  therichclub.com    [Home][Pricing][Login]         â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚     Seu domÃ­nio .com.rich                          â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚     [ username      ] .com.rich  [ğŸ” Buscar]      â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚     âœ… maria.com.rich estÃ¡ disponÃ­vel!             â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â”‚     [ğŸ“‹ Ver Planos]                                â”‚ â”‚
â”‚  â”‚                                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ… RESUMO VISUAL

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              O QUE Ã‰ TheRichClub?                            â”‚
â”‚                                                              â”‚
â”‚  âŒ NÃƒO Ã‰:                      âœ… Ã‰:                       â”‚
â”‚  â€¢ Registrador de .com         â€¢ Plataforma de perfis      â”‚
â”‚  â€¢ DNS wildcard real           â€¢ Sistema de licenciamento  â”‚
â”‚  â€¢ SubdomÃ­nios reais           â€¢ React Router + Banco      â”‚
â”‚  â€¢ MÃºltiplos servidores        â€¢ Display ".com.rich" fake  â”‚
â”‚                                 â€¢ URL real: /u/:username   â”‚
â”‚                                                              â”‚
â”‚  USUÃRIO VÃŠ:                   SISTEMA USA:                â”‚
â”‚  maria.com.rich                therichclub.com/u/maria     â”‚
â”‚  (sÃ³ visual!)                  (URL real!)                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Link para Diagrama Online (opcional):**

VocÃª pode criar um diagrama interativo usando:
- **Excalidraw:** https://excalidraw.com
- **Draw.io:** https://app.diagrams.net
- **Mermaid:** (jÃ¡ em markdown)

---

**Ãšltima AtualizaÃ§Ã£o:** 2025-11-09
